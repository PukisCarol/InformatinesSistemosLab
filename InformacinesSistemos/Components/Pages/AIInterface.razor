@page "/ai-interface"
@rendermode InteractiveServer
@inject InformacinesSistemos.Services.IAIService AIService
<PageTitle>Pagalba su DI</PageTitle>

<h2>Pagalbos atsakiklis (DI)</h2>

<p>
    Užduokite klausimą apie žaidimus, užsakymus ar sistemą.
</p>

<div class="ai-form">
    <textarea @bind="question"
              placeholder="Aprašykite savo klausimą ar problemą..."></textarea>

    <button class="primary-btn" @onclick="SendQuestion" disabled="@string.IsNullOrWhiteSpace(question)">
        Gauti atsakymą
    </button>
</div>



    <div class="ai-answer">
        <h4>DI atsakymas:</h4>
        @lastAnswer
    </div>


@code {
    private string question = string.Empty;
    private MarkupString lastAnswer = new();

    private async Task SendQuestion()
    {
        var raw = await AIService.GetAnswerAsync(question);
        lastAnswer = (MarkupString)raw; // render as HTML
        question = "";
    }
}