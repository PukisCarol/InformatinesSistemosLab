@page "/login"
@rendermode InteractiveServer
@inject InformacinesSistemos.Services.SimpleAuthenticationStateProvider AuthProvider
@inject NavigationManager Nav

<PageTitle>Prisijungimas</PageTitle>

<h2>Prisijungimas</h2>

<p>
    Demonstracinis prisijungimas: slaptažodis šiuo metu tikrinamas nebus.
    Rolė naudojama tam, kad pamatytumėte skirtingas funkcijas (naudotojas, moderatorius, administratorius).
</p>

<div class="login-form">
    <label>
        El. paštas
        <input @bind="email" type="email" />
    </label>

    <label>
        Slaptažodis
        <input @bind="password" type="password" />
    </label>

    <label>
        Rolė
        <select @bind="role">
            <option value="User">Naudotojas</option>
            <option value="Moderator">Moderatorius</option>
            <option value="Admin">Administratorius</option>
        </select>
    </label>

    <button class="primary-btn" @onclick="HandleLogin">
        Prisijungti
    </button>

</div>

@code {
    private string email = string.Empty;
    private string password = string.Empty;
    private string role = "User";

    private void HandleLogin()
    {
        if (string.IsNullOrWhiteSpace(email))
            return; // jeigu tuscias, nieko nedarom

        // Šiuo metu slaptažodžio netikriname – tik nustatome rolę.
        AuthProvider.SignIn(email, role);
        Nav.NavigateTo("/");
    }

}
